[global_tags]
  bosh-job = "<%= name %>"
  bosh-deployment = "<%= spec.deployment %>"
<% p("global_tags").each do |tag| %>
  <%= tag['name'] %> = "<%= tag['value'] %>"
<% end %>

[agent]
  hostname = "<%= spec.ip %>"

<%
  info = nil
  prefix = ""

  if_link("wf_proxy_info") do |link|
    info = link
  end

  if_p("wavefront_prefix") do |prop|
    prefix = prop + ((prop.end_with?".") ?  "" : ".")
  end
%>

[[outputs.wavefront]]
  host = "<%= info.instances[0].address %>"
  port = <%= link('wf_proxy_info').properties["wavefront_push_listener_port"] %>
  prefix = "<%= prefix %>"

# ---
# spec = "<%= spec %>"
# ---
# spec['properties'] = "<%= spec['properties'] %>"
# ---
# wf_proxy_info.properties = "<%= link('wf_proxy_info').properties %>"
# wf_proxy_info.instances[0].address = "<%= link('wf_proxy_info').instances[0].address %>"
# ---

[[inputs.cpu]]

[[inputs.disk]]
  ignore_fs = ["tmpfs", "devtmpfs", "devfs"]

[[inputs.diskio]]

[[inputs.kernel]]

[[inputs.mem]]

[[inputs.processes]]

[[inputs.swap]]

[[inputs.system]]

[[inputs.net]]
